generator client {
  provider = "prisma-client"
  output   = "./generated"
}

datasource db {
  provider = "postgresql"
}

model User {
  telegramId   String         @id @unique
  username     String?
  firstName    String?
  lastName     String?
  
  foodGroup    FoodGroup[]

  createdAt    DateTime       @default(now())
  updatedAt    DateTime       @default(now())
}



model FoodGroup {
  id        String   @id @unique @default(cuid())
  name      String
  
  user      User? @relation(fields: [ownerId], references: [telegramId])
  ownerId   String

  recipe    Recipe[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())

  @@unique([name, ownerId])
}

model Recipe {
  id           String     @id @default(cuid())
  title        String
  description  String?
  instructions String[]
  rating       Float?
  userId       String
  ingredients  Json[]
  
  foodGroup    FoodGroup? @relation(fields: [groupId], references: [id])
  groupId      String?

  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @default(now())
}



